---
layout: post
title: "网络学习进阶"
subtitle: "进阶"
date: 2020-10-29 08:00:00
author: "Deetch"
header-img: "img/home-bg-o.jpg"
catalog: true
tags:
    - network
---

> "基本概念"

## 设备

#### Hub
工作在物理层，将数据复制发送到每一个口上;

#### 交换机
工作在数据链路层，将数据只发送到目的MAC的口上；交换机会学习得到一个转发表，有过期时间；

#### 路由器
工作在网络层;

## 工具

#### net-tools和iproute2


## 基本概念

### CIDR(无类型域间选路)

10.100.122.2/24，前24位是网络号，后8位是主机号；  
广播地址：10.100.122.255  
子网掩码：255.255.255.0  


### IP

#### 基本IP信息查看

~~~
enp1s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000

scope 是global，说明是可以对外的；host，仅供本机互相通信；
UP 表示网卡处于启动的状态；
BROADCAST 表示这个网卡有广播地址，可以发送广播包；
MULTICAST 表示网卡可以发送多播包；
LOWER_UP 表示 L1 是启动的，也即网线插着呢。
MTU1500 最大传输单元 MTU 为 1500，这是以太网的默认值
~~~



#### IP包发送流程

本机：16.158.23.6
目标：192.168.1.6
通过交换机连接
Linux 默认的逻辑是，如果这是一个跨网段的调用，它便不会直接将包发送到网络上，而是企图将包发送到网关；
如果配置了网关，linux会获取网关的MAC地址，将包发出去。对于192.168.1.6这台机器，目标IP是它，但是
MAC地址不是它的，所以它的网卡是不会把包收进去的。


#### DHCP(动态主机配置协议)

DHCP Discover

~~~
新来的机器使用IP地址0.0.0.0发送一个广播包，目的IP地址为255.255.255.255。广播包封装了UDP，
UDP封装了BOOTP。其实DHCP是BOOTP的增强版。
~~~

DHCP Offer
~~~
DHCP server仍然使用广播地址作为目的地址。回复说，我分配了一个可用的IP给你，你看如何。同时发送子网掩码、网关和IP地址租用期等；
~~~


#### ARP
已知IP地址，求MAC地址


#### ICMP(互联网控制报文协议)

~~~
ping
traceroute
~~~


#### 静态路由

~~~
静态路由，其实就是在路由器上，配置一条一条规则。这些规则包括：
想访问 BBS 站（它肯定有个网段），从 2 号口出去，下一跳是 IP2；
想访问教学视频站（它也有个自己的网段），从 3 号口出去，下一跳是 IP3，然后保存在路由器里
~~~

~~~
IP头和MAC头哪些边、哪些不变？
MAC 地址是一个局域网内才有效的地址。因而，MAC 地址只要过网关，就必定会改变，因为已经换了局域网。两者主要的区别在于 IP 地址是否改变。不改变 IP 地址的网关，我们称为转发网关；改变 IP 地址的网关，我们称为NAT 网关
~~~

#### 动态路由

## TCP/UDP


## 应用层协议

#### RTMP
